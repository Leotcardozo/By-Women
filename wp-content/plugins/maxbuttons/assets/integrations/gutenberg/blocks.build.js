!function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1)},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(2),s=(n.n(r),n(3)),u=(n.n(s),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),c=wp.i18n.__,p=wp.blocks.registerBlockType,h=wp.blockEditor.InspectorControls,g=wp.components,b=g.PanelBody,m=(g.TextareaControl,g.TextControl),d=g.ToggleControl,w=g.Button,f=wp.element,y=f.Component,C=(f.Fragment,f.createElement);wp.compose.withState;p("maxbuttons/maxbuttons-block",{title:c("MaxButtons Block"),icon:C("img",{src:mb_gutenberg.icon_url,width:20}),category:"common",keywords:[c("maxbuttons-block"),c("maxbuttons")],className:!1,customClassName:!1,attributes:{id:{type:"string"},button_id:{type:"string"},url:{type:"string",attribute:"url"},text:{type:"string",attribute:"text"},text2:{type:"string"},newwindow:{type:"boolean"},relnofollow:{type:"boolean"},is_download:{type:"boolean"},tooltip:{type:"string"},compile:{type:"boolean"},style:{type:"boolean"},google_enable:{type:"integer"},google_action:{type:"string"},google_label:{type:"string"},google_category:{type:"string"}},edit:function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeID=n.onChangeID.bind(n),n.onChangeText=n.onChangeText.bind(n),n.onChangeText2=n.onChangeText2.bind(n),n.onChangeURL=n.onChangeURL.bind(n),n.onChangeTooltip=n.onChangeTooltip.bind(n),n.onChangeClassName=n.onChangeClassName.bind(n),n.onChangeGlabel=n.onChangeGlabel.bind(n),n.onChangeGaction=n.onChangeGaction.bind(n),n.onChangeGcategory=n.onChangeGcategory.bind(n),n.updateNewWindow=n.updateToggleAttribute("newwindow"),n.updateRelNoFollow=n.updateToggleAttribute("relnofollow"),n.updateIsDownload=n.updateToggleAttribute("is_download"),n.updateCompile=n.updateToggleAttribute("compile"),n.updateStyle=n.updateToggleAttribute("style"),n.preventClick=n.preventClick.bind(n),n.ajaxButton=n.ajaxButton.bind(n),n.openButtonModal=n.openButtonModal.bind(n),n.insertButton=n.insertButton.bind(n),n.state={stylefile:"",isPro:!1},n.button,n.limitajax,n}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.attributes.id&&this.ajaxButton(),1==mb_gutenberg.ispro&&this.setState({isPro:!0})}},{key:"ajaxButton",value:function(e){clearTimeout(this.limitajax);var t=this;t.limitajax=setTimeout(function(){var n=t.props.attributes,o=n.id,a=n.text,l=n.text2,i=n.url,r=n.tooltip,s=n.newwindow,u=n.relnofollow,c=n.is_download,p=n.className,h=n.compile,g=n.style;wp.ajax.send("maxajax",{data:{plugin_action:"gutenberg_button",nonce:maxajax.nonce,id:o,text:a,text2:l,url:i,linktitle:r,newwindow:s,relnofollow:u,is_download:c,extraclass:p,compile:h,style:g,reset:e},success:function(e){t.button=e.button,t.setState({stylefile:e.style}),e.attributes&&t.props.setAttributes(e.attributes)},error:function(e){}})},700)}},{key:"preventClick",value:function(e){return e.preventDefault(),!1}},{key:"onChangeText",value:function(e){this.props.setAttributes({text:e}),this.ajaxButton()}},{key:"onChangeText2",value:function(e){this.props.setAttributes({text2:e}),this.ajaxButton()}},{key:"onChangeTooltip",value:function(e){this.props.setAttributes({tooltip:e}),this.ajaxButton()}},{key:"onChangeURL",value:function(e){this.props.setAttributes({url:e}),this.ajaxButton()}},{key:"onChangeID",value:function(e){this.props.setAttributes({id:e}),this.ajaxButton(!0)}},{key:"onChangeClassName",value:function(e){this.props.setAttributes({className:e})}},{key:"onChangeGlabel",value:function(e){this.props.setAttributes({google_label:e})}},{key:"onChangeGcategory",value:function(e){this.props.setAttributes({google_category:e})}},{key:"onChangeGaction",value:function(e){this.props.setAttributes({google_action:e})}},{key:"updateToggleAttribute",value:function(e){var t=this;return function(){var n=t.props.attributes[e];(0,t.props.setAttributes)(o({},e,!n))}}},{key:"openButtonModal",value:function(){var e={};e.callback=this.insertButton,e.useShortCodeOptions=!1,this.maxmedia=new window.maxFoundry.maxMedia,this.maxmedia.init(e),this.maxmedia.openModal()}},{key:"insertButton",value:function(e,t){this.onChangeID(e),this.maxmedia.close()}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,e.className),o=this.state.isPro,a=t.google_enable;if(o&&a)var l=!0;else var l=!1;return[wp.element.createElement(h,{key:"mb_inspector"},wp.element.createElement(b,{title:c("Button Settings")},wp.element.createElement(w,{className:"modal-button",onClick:this.openButtonModal}," Select Button "),wp.element.createElement("h4",null,"Button ID : ",t.id),wp.element.createElement(m,{label:c("Text"),value:t.text,onChange:this.onChangeText,help:c("You can change the text of the Button.")}),this.state.isPro?wp.element.createElement(m,{label:c("Text2"),value:t.text2,onChange:this.onChangeText2}):null,wp.element.createElement(m,{label:c("URL"),value:t.url,onChange:this.onChangeURL,help:c("You can enter an alternative URL")}),wp.element.createElement(d,{label:c("Open in New Window"),checked:t.newwindow,onChange:this.updateNewWindow}),wp.element.createElement(d,{label:c('Use rel="nofollow"'),checked:t.relnofollow,onChange:this.updateRelNoFollow}),wp.element.createElement(d,{label:c("URL Is Download"),checked:t.is_download,onChange:this.updateIsDownload}),wp.element.createElement(m,{label:c("Tooltip Text"),value:t.tooltip,onChange:this.onChangeTooltip}))),wp.element.createElement(h,{key:"advanced"},wp.element.createElement(b,{title:c("Advanced Settings"),initialOpen:!1},wp.element.createElement(m,{label:c("Extra CSS Class"),value:t.className,onChange:this.onChangeClassName,help:c("Adds an extra CSS class to the button.")}),wp.element.createElement(d,{label:c("Output CSS inline"),checked:t.style,onChange:this.updateStyle,help:c("Use when style is not loading properly. Will output it in the HTML document, instead of footer")}),wp.element.createElement(d,{label:c("Recompile on load"),checked:t.compile,onChange:this.updateCompile,help:c("Use only for testing. This will slow down your site noticably! ")}))),l&&wp.element.createElement(h,{key:"google"},wp.element.createElement(b,{title:c("Google Event Options"),initialOpen:!1},wp.element.createElement(m,{label:c("Category"),value:t.google_category,onChange:this.onChangeGcategory,help:c("You can change the text of the Button.")}),wp.element.createElement(m,{label:c("Action"),value:t.google_action,onChange:this.onChangeGaction,help:c("You can change the text of the Button.")}),wp.element.createElement(m,{label:c("Label"),value:t.google_label,onChange:this.onChangeGlabel,help:c("You can change the text of the Button.")}))),wp.element.createElement("div",{className:n,key:"mb_block"},wp.element.createElement("span",{dangerouslySetInnerHTML:{__html:this.button},onClick:this.preventClick}),wp.element.createElement("link",{rel:"stylesheet",href:this.state.stylefile}),this.button?wp.element.createElement("div",null):wp.element.createElement("div",null,"To start, add a MaxButton via the Block Settings on the right."))]}}]),t}(y),save:function(e){return null}})},function(e,t){},function(e,t){}]);